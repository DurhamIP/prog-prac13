#Introduction to Programming

##Practical 13: Coupling and Coheasion 

## Instructions

This practical focuses on the ideas introduced in previous lectures about coupling and coheasion.

###Level 1: Looking at Zuul-bad

1. Download the file zuul-bad.zip onto your computer and uncompress it. This is a simple adventure game as mentioned in the lectures last week.
2. Build the code (from Game) and try running it (New Game object, invoke play())
3. Have a play of the game.
4. Take a look at the code. Can you see why this is called zuul-bad?
5. Try to add a new room (or two) to the game. Bizarely you add a new room as part of the Game class in a method called CreateRooms().

###Level 2: Trying to tidy up the code

1. Take a look at the Game class. There are two methods (goRoom and printWelcome) which print a description of the room you are in. This is code duplication and is a bad idea because if we change the code for one we will probably forget to change the code for the other.
2. Locate the duplicated code in each method.
3. Replace this code with a new method (called printLocationInfo) which is called by both goRoom and printWelcome. This will make some of the work later on easier.

###Level 3: Adding new directions

In this part you're going to add a new set of directions to the game - up and down (i.e. you shoud be able to move to a new room by typing 'go up').

The code is bad in terms of coupling and coheasion so you'll need to make a number of changes to the code in order to do this.

####Level 3.1: Let's tidy the code up a bit

Before we add the up and down directions let's tidy the code up a little. The Game class accesses the Room objects defined at the start of the Room class. This is a bad thing for coupling and is due to the fact that the objects are defined as public - this is generally not a good idea.

```
    public String description;
    public Room northExit;
    public Room southExit;
    public Room eastExit;
    public Room westExit;
```

Change these to be private - hence encapsulating the data in the class.

This will break the whole program as Game expects to be able to access all the data in Room. To fix this we need to add some new methods to Room:

So we don't need to directly access the objects listed above let's add a method that we can use to get the room for each direction. For example in Game if we have the code:

```
    currentRoom.northExit
```

   we want to be able to access this object with:

```
    currentRoom.getExit("north")
```

This allows us access to the data but in a more controlled manner. I.e. if we change in the future the way rooms are stored in the Room class we only need to change the getExit code in Room and not all classes which use it.

Write the code for the method getExit(String direction) in the class Room.

Modify all the code in the Game class which accesses the (now) private objects to use this method.

You can also modify the code for printLocationInfo (in Game) so that it gets a string describing the exits from a room which is generated by the Room class. Create a method in Room with the following signature and call it from printLocationInfo:

```
    public String getExitString()
```

OK, your code is now a little tidier so you can add new directions.

#### Level 3.2: Adding up and down

The setExits method of Room takes four variables (Room north, Room east, Room south, Room west). Modify the code to take six variables (i.e. add up and down to this list).

Modify the getExit() and getExistString() methods so that they allow you to go up and down.

Modify the calls to this in createRooms() so that you have some rooms you need to go up and down to.

#### Level 3.3: What about other directions?

We could keep on doing this - adding new directions by adding a new variable to setExits() each time we want to add a new valid direction. But what if we want to add the directions "north-east", "north-west" etc... This would add another four variables - we're getting a lot of variables now! We may also want to allow comands like "go into-cupboard" - even more variables.

Instead we could create a new method on room with a signature:

```
    addExit(String name, Room destination)
```

Modify your code so that it can accept the four ordinal directions (north-east, ...) as well as setting the four cardinal directions (north, ...) using this method.

### Level 4: Extension Exercises

Zuul is now better than it was - but still not perfect. Here is a list of ways you could choose to extend the game:

1. Rather than having to store the room directions as private variables within Room store them using a HashMap (See online for how to use HashMaps if you've not used them already).
2. Add items to your game (e.g. copy of exam script, piece of chalk) which are in different rooms. You should allow a player to pick up up items and use them (e.g. picking up a key allows you to open a safe in the admin office and get the exam scripts)
3. Add in some non player characters to the game who you can interact with (e.g. buying a drink for the janitor in the pub will cause him to give you the key)
4. Add a goal to the game so that when you achieve the goal you have won (e.g. aceing your exams)
5. Give a weight to each item in the game and have a limit on how much a player can carry.